# ç™¾åº¦å›¾åƒè¯†åˆ« MCP å·¥å…·

åŸºäºç™¾åº¦æ™ºèƒ½äº‘å›¾åƒè¯†åˆ«APIçš„MCP (Model Context Protocol) å·¥å…·ï¼Œæ”¯æŒå¤šç§å›¾åƒè¯†åˆ«åŠŸèƒ½ã€‚

## åŠŸèƒ½ç‰¹æ€§

- ğŸ” **å¤šç§è¯†åˆ«ç±»å‹**ï¼šæ”¯æŒ13ç§ä¸åŒçš„å›¾åƒè¯†åˆ«åŠŸèƒ½
- ğŸŒ **çµæ´»è¾“å…¥**ï¼šæ”¯æŒæœ¬åœ°æ–‡ä»¶è·¯å¾„å’Œç½‘ç»œå›¾ç‰‡URL
- âš¡ **é«˜æ€§èƒ½**ï¼šå¼‚æ­¥å¤„ç†ï¼Œè®¿é—®ä»¤ç‰Œè‡ªåŠ¨ç¼“å­˜
- ğŸ›¡ï¸ **é”™è¯¯å¤„ç†**ï¼šå®Œå–„çš„é”™è¯¯å¤„ç†å’Œæ—¥å¿—è®°å½•
- ğŸ“ **ç±»å‹å®‰å…¨**ï¼šä½¿ç”¨Pydanticè¿›è¡Œæ•°æ®éªŒè¯

## æ”¯æŒçš„è¯†åˆ«ç±»å‹

| ç±»å‹ | åç§° | æè¿° |
|------|------|------|
| `general_basic` | é€šç”¨ç‰©ä½“è¯†åˆ«ï¼ˆæ ‡å‡†ç‰ˆï¼‰ | è¯†åˆ«å›¾ç‰‡ä¸­çš„ç‰©ä½“ï¼Œè¿”å›ç‰©ä½“åç§°åŠç½®ä¿¡åº¦ |
| `general` | é€šç”¨ç‰©ä½“è¯†åˆ«ï¼ˆé«˜ç²¾åº¦ç‰ˆï¼‰ | é«˜ç²¾åº¦è¯†åˆ«å›¾ç‰‡ä¸­çš„ç‰©ä½“ï¼Œå‡†ç¡®ç‡æ›´é«˜ |
| `advanced_general` | é€šç”¨ç‰©ä½“å’Œåœºæ™¯è¯†åˆ« | è¯†åˆ«å›¾ç‰‡ä¸­çš„ç‰©ä½“å’Œåœºæ™¯ï¼ŒåŒ…å«ä½ç½®ä¿¡æ¯ |
| `object_detect` | å›¾åƒä¸»ä½“æ£€æµ‹ | æ£€æµ‹å¹¶å®šä½å›¾ç‰‡ä¸­çš„ä¸»ä½“ç‰©ä½“ |
| `animal` | åŠ¨ç‰©è¯†åˆ« | è¯†åˆ«å›¾ç‰‡ä¸­çš„åŠ¨ç‰©ï¼Œæ”¯æŒ8000+åŠ¨ç‰©ç§ç±» |
| `plant` | æ¤ç‰©è¯†åˆ« | è¯†åˆ«å›¾ç‰‡ä¸­çš„æ¤ç‰©ï¼Œæ”¯æŒ2ä¸‡+æ¤ç‰©ç§ç±» |
| `logo` | Logoè¯†åˆ« | è¯†åˆ«å›¾ç‰‡ä¸­çš„å“ç‰ŒLogoï¼Œæ”¯æŒæ•°ä¸‡ç§Logo |
| `dish` | èœå“è¯†åˆ« | è¯†åˆ«å›¾ç‰‡ä¸­çš„èœå“ï¼Œè¿”å›èœå“åç§°åŠå¡è·¯é‡Œä¿¡æ¯ |
| `car` | è½¦å‹è¯†åˆ« | è¯†åˆ«å›¾ç‰‡ä¸­çš„è½¦è¾†å‹å·ã€å“ç‰Œã€å¹´ä»½ç­‰ä¿¡æ¯ |
| `landmark` | åœ°æ ‡è¯†åˆ« | è¯†åˆ«å›¾ç‰‡ä¸­çš„åœ°æ ‡å»ºç­‘ï¼Œè¿”å›åœ°æ ‡åç§°åŠä½ç½® |
| `ingredient` | æœè”¬è¯†åˆ« | è¯†åˆ«å›¾ç‰‡ä¸­çš„æ°´æœå’Œè”¬èœç§ç±» |
| `red_wine` | çº¢é…’è¯†åˆ« | è¯†åˆ«å›¾ç‰‡ä¸­çš„çº¢é…’å“ç‰Œå’Œä¿¡æ¯ |
| `currency` | è´§å¸è¯†åˆ« | è¯†åˆ«å›¾ç‰‡ä¸­çš„è´§å¸é¢é¢å’Œç±»å‹ |

## å®‰è£…é…ç½®

### 1. å®‰è£…ä¾èµ–

```bash
python install.py
```

æˆ–è€…æ‰‹åŠ¨å®‰è£…ï¼š

```bash
pip install -r requirements.txt
```

### 2. é…ç½®MCP

åœ¨Cursorçš„MCPé…ç½®æ–‡ä»¶ä¸­ï¼ˆé€šå¸¸ä½äº `%USERPROFILE%\.cursor\mcp.json`ï¼‰æ·»åŠ ä»¥ä¸‹é…ç½®ï¼š

```json
{
  "baidu-image-recognition": {
    "command": "python",
    "args": [
      "path_to_your_server.py"
      ],
    "env": {
      "BAIDU_API_KEY": "your_api_key",
      "BAIDU_SECRET_KEY": "your_secret_key"
    }
  }
}
```

æ³¨æ„ï¼š
- `cwd` è·¯å¾„éœ€è¦ä½¿ç”¨æ­£æ–œæ  `/` è€Œä¸æ˜¯åæ–œæ  `\`
- è¯·å°† `your_api_key` å’Œ `your_secret_key` æ›¿æ¢ä¸ºæ‚¨çš„å®é™…å¯†é’¥

### 3. è·å–ç™¾åº¦APIå¯†é’¥

1. æ³¨å†Œç™¾åº¦æ™ºèƒ½äº‘è´¦å·ï¼šhttps://cloud.baidu.com/
2. è¿›å…¥æ§åˆ¶å° -> äººå·¥æ™ºèƒ½ -> å›¾åƒè¯†åˆ«
3. åˆ›å»ºåº”ç”¨ï¼Œè·å–API Keyå’ŒSecret Key

## ä½¿ç”¨æ–¹æ³•

### å·¥å…·è°ƒç”¨

#### 1. è·å–è¯†åˆ«ç±»å‹åˆ—è¡¨

```python
result = await get_recognition_types()
```

#### 2. æ‰§è¡Œå›¾åƒè¯†åˆ«

```python
# ä½¿ç”¨æœ¬åœ°æ–‡ä»¶
result = await baidu_image_recognition({
    "image_path": "/path/to/image.jpg",
    "recognition_type": "general_basic",
    "top_num": 5
})

# ä½¿ç”¨ç½‘ç»œURL
result = await baidu_image_recognition({
    "image_path": "https://example.com/image.jpg",
    "recognition_type": "animal",
    "top_num": 3,
    "baike_num": 1,
    "with_face": True  # åŠ¨ç‰©è¯†åˆ«ç‰¹æœ‰å‚æ•°
})
```

## APIå“åº”æ ¼å¼

### æˆåŠŸå“åº”

```json
{
    "success": true,
    "data": {
        "log_id": 123456789,
        "result_num": 1,
        "result": [{
            "keyword": "çŒ«",
            "score": 0.95,
            "root": "åŠ¨ç‰©"
        }]
    },
    "recognition_type": "animal",
    "image_info": {
        "path": "/path/to/image.jpg",
        "size": 1024
    }
}
```

### é”™è¯¯å“åº”

```json
{
    "success": false,
    "error": "å›¾ç‰‡æ–‡ä»¶ä¸å­˜åœ¨",
    "recognition_type": "general_basic",
    "image_info": {
        "path": "/invalid/path.jpg"
    }
}
```

## é”™è¯¯å¤„ç†

å¸¸è§é”™è¯¯åŠè§£å†³æ–¹æ¡ˆï¼š

- **APIå¯†é’¥é”™è¯¯**ï¼šæ£€æŸ¥MCPé…ç½®ä¸­çš„ç¯å¢ƒå˜é‡æ˜¯å¦æ­£ç¡®
- **æ–‡ä»¶ä¸å­˜åœ¨**ï¼šç¡®ä¿å›¾ç‰‡è·¯å¾„æ­£ç¡®ä¸”æ–‡ä»¶å­˜åœ¨
- **ç½‘ç»œé”™è¯¯**ï¼šæ£€æŸ¥ç½‘ç»œè¿æ¥å’ŒURLæ˜¯å¦æœ‰æ•ˆ
- **å›¾ç‰‡æ ¼å¼é”™è¯¯**ï¼šæ”¯æŒJPGã€PNGã€BMPæ ¼å¼ï¼Œå¤§å°ä¸è¶…è¿‡4MB
- **é…é¢é™åˆ¶**ï¼šæ£€æŸ¥ç™¾åº¦APIè°ƒç”¨æ¬¡æ•°æ˜¯å¦è¶…é™

## é¡¹ç›®ç»“æ„

```
baidu-image-recognition-mcp/
â”œâ”€â”€ server.py          # ä¸»æœåŠ¡æ–‡ä»¶
â”œâ”€â”€ example.py         # ä½¿ç”¨ç¤ºä¾‹
â”œâ”€â”€ install.py         # å®‰è£…è„šæœ¬
â”œâ”€â”€ requirements.txt   # ä¾èµ–åˆ—è¡¨
â”œâ”€â”€ README.md         # æ–‡æ¡£
â””â”€â”€ QUICKSTART.md     # å¿«é€Ÿå…¥é—¨æŒ‡å—
```

## è®¸å¯è¯

MIT License

## è´¡çŒ®

æ¬¢è¿æäº¤Issueå’ŒPull Requestæ¥æ”¹è¿›æœ¬é¡¹ç›®ã€‚ 